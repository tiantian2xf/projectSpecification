# 性能规范
## 内容部分
### 1.尽量减少HTTP请求数
80%的终端用户响应时间都花在了前端上，其中大部分时间都在下载页面上的各种组件：图片，样式表，脚本，Flash等等。减少组件数必然能够减少页面提交的HTTP请求数。这是让页面更快的关键
##### 合并文件
是通过把所有脚本放在一个文件中的方式来减少请求数的，当然，也可以合并所有的CSS。如果各个页面的脚本和样式不一样的话，合并文件就是一项比较麻烦的工作了，但把这个作为站点发布过程的一部分确实可以提高响应时间。
##### 行内图片（Base64编码）
用data: URL模式来把图片嵌入页面。这样会增加HTML文件的大小，把行内图片放在（缓存的）样式表中是个好办法，而且成功避免了页面变“重”。

### 2.让Ajax可缓存
HTTP协议通过Header来控制缓存的，包括请求和响应，这里只讲响应的缓存机制。响应缓存主要通过Expires头和Cache-control头来控制。下面按优先级由高到列出一些常见的缓存策略，：

Cache-Control:no-store 不要缓存这个文档；  
Cache-Control:no-cache 保存文档，但是需要与服务端再验证才能使用；  
Cache-control:max-age 缓存最长保存时间，单位是秒；   
Expires:日期 根据日期判断过期，由于客户端和服务器日期可能不同步，不推荐使用。  

### 3.异步加载组件
可根据相对应的库去针对做不同的异步组件加载方案。

### 4.减少DOM元素的数量
一个复杂的页面意味着要下载更多的字节，而且用JavaScript访问DOM也会更慢。举个例子，想要添加一个事件处理器的时候，循环遍历页面上的500个DOM元素和5000个DOM元素是有区别的。  

DOM元素的数量很容易测试，只需要在Firebug的控制台里输入：

``` js
document.getElementsByTagName('*').length
```

### 5.尽量少用iframe

用iframe可以把一个HTML文档插入到父文档里，重要的是明白iframe是如何工作的并高效地使用它。

iframe的优点：  
1）引入缓慢的第三方内容，比如标志和广告；  
2）安全沙箱；  
3）并行下载脚本。  

iframe的缺点：  
1）代价高昂，即使是空白的iframe；  
2）阻塞页面加载；  
3）非语义。

## CSS部分

### 6.避免使用CSS表达式
用CSS表达式动态设置CSS属性，是一种强大又危险的方式。从IE5开始支持，但从IE8起就不推荐使用了。例如，可以用CSS表达式把背景颜色设置成按小时交替的：
``` css
background-color: expression( (new Date()).getHours()%2 ? "#B8D4FF" : "#F08A00" );
```

### 7.选择<link>舍弃@import
href是Hypertext Reference的缩写，指向网络资源所在位置，建立和当前元素（锚点）或当前文档（链接）之间的链接，如果我们在文档中添加
``` html
<link href=”common.css” rel=”stylesheet”/>
```
那么浏览器会识别该文档为css文件，就会**并行下载**资源并且不会停止对当前文档的处理。

这也是为什么建议使用link方式来加载css，而不是使用@import方式，@import需要页面网页完全载入以后加载。

两者都是外部引用CSS的方式，但是存在一定的区别：

　　1）link是XHTML标签，除了加载CSS外，还可以定义RSS等其他事务；@import属于CSS范畴，只能加载CSS。

　　2）link引用CSS时，在页面载入时同时加载；@import需要页面网页完全载入以后加载。

　　3）link是XHTML标签，无兼容问题；@import是在CSS2.1提出的，低版本的浏览器不支持。

　　4）ink支持使用Javascript控制DOM去改变样式；而@import不支持。

### 8.将样式表放在顶部

### 9.使用外部CSS
纯粹而言，内联快一些。但现实中还是使用外部文件会产生较快的页面。因为CSS文件有机会被浏览器缓存起来。HTML文档通常不会被配置为可以缓存。另外，由于外联，HTML文档减小，HTTP请求的数量也不会增加

